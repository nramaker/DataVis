<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CS498 Data Visualization - Final Project</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.5/d3.js"></script>
<style type="text/css">
    .bs-example{
      margin: 20px;
    }

    text{
      font: 10px sans-serif;
      text-anchor: middle;
    }
</style>
</head>
<body>
    
<div>
<nav class="navbar navbar-inverse" role="navigation" style="padding-left:130px;">
       <ul class="nav navbar-nav">
      <li class="active"><a href="/">Home<span class="sr-only">(current)</span></a></li>
      <li><a href="/about">About the Visualization</a></li>
    </ul>
</nav>
</div>

<div class="bs-example">
    <ul class="pagination pagination-lg">
        <li><a href="page2">&laquo;</a></li>
        <li><a href="/">1</a></li>
        <li><a href="page2">2</a></li>
        <li class="disabled"><a href="page3">3</a></li>
        <li><a href="page4">4</a></li>
        <li><a href="page5">5</a></li>
        <li><a href="page4">&raquo;</a></li>
    </ul>
</div>
<div class="jumbotron"> 
<h2>Population by Department</h2>

This is place to put content. You can put slider, short description about your website and place some links for navigation.
</div>
<div id="packedCircles">
  <h3>Population by Department</h3>
  <svg id="chart" width="800" height="500"></svg>
</div>    

</body>
<script src="https://d3js.org/d3.v4.js"></script>
<script type="text/javascript">
    //initialize global variables 
  var svg = d3.select("#chart");

  var margin = {top: 20, right: 180, bottom: 30, left: 40},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom;

  var g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var format = d3.format(",d");

  var color = d3.scale.category20();

  var pack = d3.layout.pack()
    .size([width - 2, height - 2])
    .padding(3);

  d3.csv("data/dept_size.csv", function(error, data) {
     if (error) 
        throw error;

    var stratify = d3.stratify()
      .parentId(function(d) { 
        console.log(d.Department.substring(0, d.Department.lastIndexOf("."))); 
        return d.Department.substring(0, d.Department.lastIndexOf(".")); 
      });

    var root = stratify(data)
      .sum(function(d) { console.log(d); return d.Count; })
      .sort(function(a, b) { console.log(b.Cout - a.Count); return b.Count - a.Count; });

    pack(root);

      var node = svg.select("g")
        .selectAll("g")
        .data(data)
        .enter().append("g")
          .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; })
          //.attr("class", function(d) { return "node" + (!d.children ? " node--leaf" : d.depth ? "" : " node--root"); })
          .each(function(d) { d.node = this; })
          .on("mouseover", hovered(true))
          .on("mouseout", hovered(false));

      node.append("circle")
      .attr("id", function(d) { return "node-" + d.Count; })
      .attr("r", function(d) { return d.r; })
      .style("fill", function(d) { return color(d.depth); });

  });

</script>
</html>   